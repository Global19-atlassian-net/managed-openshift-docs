// Module included in the following assemblies:
//
// * assemblies/osd_process_security.adoc

[id="osd_policy_incident_{context}"]
= Incident and operations management

== Architecture
The following figure illustrates the basic {product-title} architecture:

.{product-title} architecture
image::osd_architecture_overview.png[ {product-title} architecture]


== Platform monitoring
A Red Hat Site Reliability Engineer (SRE) maintains a centralized monitoring and alerting system for all {product-title} cluster components, SRE services, and underlying cloud provider accounts. All security and compliance logs are forwarded securely to a centralized log aggregator, where they are monitored and may trigger configured alerts. These alerts may trigger further events such as incidents, autoheals, or notifications, and are also subject to periodic manual review.

== Incident management
An incident is an event which results in a degradation or outage of one or more Red Hat services. An incident may be raised by a customer or Customer Experience and Engagement (CEE) member through a support case, directly by the centralized monitoring and alerting system, or directly by a member of the SRE team.

Depending on the impact on the service and customer, the incident is categorized in terms of link:https://access.redhat.com/support/offerings/production/sla[severity].

The general workflow of how a new incident is managed by Red Hat:

1. An SRE first responder is alerted to a new incident, and begins an initial investigation.
2. After the initial investigation, the incident is assigned an incident lead, who coordinates the recovery efforts.
3. The incident lead manages all communication and coordination around recovery, including any relevant notifications and/or support case updates.
4. The incident is recovered.
5. The incident is documented and a root cause analysis is performed within 3 business days of the incident.
6. Root Cause Analysis (RCA) draft document will be shared with the customer within 7 business days of the incident.


== Notiications
Platform notifications are configured using email. Any customer notification will also be sent to the corresponding Red Hat account team and if applicable, the Red Hat Technical Account Manager.

The following activities may trigger notifications:

- Platform incident
- Performance degradation
- Cluster capacity warnings
- Critical vulnerabilities and resolution
- Upgrade scheduling


== Backup and recovery
All {product-title) clusters are backed up using cloud provider snapshots. Notably, this does not include customer data stored on persistent volumes. All snapshots are taken using the appropriate cloud provider snapshot APIs and are uploaded to a secure object storage bucket (S3 in AWS, and GCS in Google Cloud) in the same account as the cluster.

[cols= "4",options="header"]

|===
|Component  | Snapshot frequency | Retention | Notes

|Full object store backup, all SRE-managed cluster Persistent Volumes (PVs)
|- Daily
- Weekly
|- 7 days
-30 days
|This is a full backup of all kubernetes objects like etcd, as well as all SRE-managed PVs in the cluster.

|Full object store backup
|Hourly
|24 hour
|This is a full backup of all kubernetes objects like etcd. No PVs are backed up in this backup schedule.

|Node root volume
|Never
|
|Nodes are considered to be short-term. Nothing critical should be stored on a node's root volume.

|===

Note: Cluster recovery processes are rehearsed once every quarter.


== Cluster capacity
Evaluating and managing cluster capacity is a responsibility that is shared between Red Hat and the customer. Red Hat SRE is responsible for the capacity of all master and infrastructure nodes on the cluster.

Red Hat SRE also evaluates cluster capacity during upgrades and in response to cluster alerts. The impact of a cluster upgrade on capacity is evaluated as part of the upgrade testing process to ensure that capacity is not negatively impacted by new additions to the cluster. During a cluster upgrade, additional worker nodes are added to make sure that total cluster capacity is maintained during the upgrade process.

Capacity evaluations by SRE staff also happen in response to alerts from the cluster, once usage thresholds are exceeded for a certain period of time. Such alerts may also result in a notification to the customer.
